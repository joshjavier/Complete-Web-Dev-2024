</main>

<footer>
  <div class="wrapper">
    <div class="center">
      <p>Copyright &copy; 2024 Josh Javier</p>
    </div>
  </div>
</footer>

<% if (locals.post) { %>
<script>
  const deleteBtn = document.querySelector('[data-js-hook="delete-btn"]')

  deleteBtn.addEventListener('click', () => {
    if (confirm('Are you sure you want to delete this post?')) {
      deletePost()
      redirectToHome()
    }
  })

  function deletePost() {
    fetch(location, { method: 'DELETE' }).then(response => {
      if (response.status === 204) {
        console.log('This post has been deleted.')
      }
    })
  }

  function redirectToHome(delay) {
    alert(`This post has been deleted. Press OK to redirect to home.`)
    location.href = '/'
    // setTimeout(() => {
    //   location.href = '/'
    // }, delay * 1000)
  }
</script>
<% } %>

</body>
</html>
